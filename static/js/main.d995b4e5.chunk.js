(this["webpackJsonphazizz-webclient"]=this["webpackJsonphazizz-webclient"]||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/logo.13001b87.png"},46:function(e,t,a){e.exports=a(77)},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(19),c=a.n(r),l=a(24),s=a(15),i=a(5),m=Object(i.b)((function(e){return{authenticated:e.auth.token.length>0}}))((function(e){var t=e.exact,a=void 0!==t&&t,n=e.path,r=e.Component,c=e.render,l=void 0===c?function(){return null}:c,i=e.authenticated,m=void 0!==i&&i,u=o.a.createElement(s.b,{exact:a,path:n,component:r,render:function(){return l()}});return m||(u=o.a.createElement(s.a,{to:"/authenticate"})),u})),u=a(16),h=a(41),p={token:"",refresh:"",expires_in:0,expire_on:0};Number(localStorage.getItem("expire_on"))>Number(new Date)&&(p.token=localStorage.getItem("token")||"",p.refresh=localStorage.getItem("refresh")||"",p.expires_in=Number(new Date(Number(localStorage.getItem("expire_on"))))-Number(new Date),p.expire_on=Number(localStorage.getItem("expire_on")));var d=Object(u.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_TOKEN":var a=t.payload,n=a.token,o=a.refresh,r=a.expires_in;return localStorage.setItem("token",n),localStorage.setItem("refresh",o),localStorage.setItem("expire_on",(new Date).setSeconds((new Date).getSeconds()+r).toString()),Object(h.a)({},e,{token:n,refresh:o,expires_in:r});default:return e}}}),b=a(42),g=Object(u.createStore)(d,Object(b.composeWithDevTools)()),f=a(10),k=a(11),z=a(13),x=a(12),E=a(14),v=a(22),j=a.n(v),y=j.a.create({baseURL:"https://hazizz.duckdns.org:9000/auth-server",timeout:2e3,headers:{"Content-Type":"application/json"}}),N=j.a.create({baseURL:"https://hazizz.duckdns.org:9000/hazizz-server",timeout:3e3,headers:{"Content-Type":"application/json"}}),O=(j.a.create({baseURL:"https://hazizz.duckdns.org:9000/thera-server",timeout:2e3,headers:{"Content-Type":"application/json"}}),function(e){return o.a.createElement("div",{className:"groupLabel"},"N\xe9v: ",o.a.createElement("span",{className:"groupName"},e.name),"\xa0 L\xe9tsz\xe1m: ",o.a.createElement("span",{className:"groupUserCount"},e.userCount))}),_=function(){return o.a.createElement("div",{className:"spinner"},"Bet\xf6lt\xe9s")},w=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(z.a)(this,Object(x.a)(t).call(this,e))).state={render:o.a.createElement(_,null)},a}return Object(E.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=this;N({url:"/me/groups",headers:{Authorization:"Bearer "+this.props.token}}).then((function(t){var a=t.data;e.setState({render:a.map((function(e){return o.a.createElement(O,{key:e.id,name:e.name,userCount:e.userCount})}))})}))}},{key:"render",value:function(){return o.a.createElement("section",{className:"groupSection"},"Csoportjaid: ",this.state.render)}}]),t}(n.Component),C=Object(i.b)((function(e){return{token:e.auth.token}}))(w),D=a(28),S=a.n(D),T=function(e){return o.a.createElement("div",{className:"taskLabel"},o.a.createElement("h1",null,o.a.createElement("span",null,e.title),o.a.createElement("span",null,e.dueDate,"\xa0",o.a.createElement("input",{checked:e.completed,disabled:!0,title:"Fejleszt\xe9s alatt!",type:"checkbox",name:"completed",id:"completed"+e.title}))),o.a.createElement("p",null,e.children),o.a.createElement("div",{className:"taskDetails"},o.a.createElement("p",null,"L\xe9trehozta: ",e.creator),o.a.createElement("p",null,"Csoport: ",e.group),o.a.createElement("p",null,"T\xe9ma: ",e.subject),o.a.createElement("p",null,"C\xedmk\xe9k (kidolgoz\xe1s alatt): ",e.tags)))},I=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(z.a)(this,Object(x.a)(t).call(this,e))).state={render:o.a.createElement(_,null)},a}return Object(E.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=this;N({url:"/v2/me/tasks",headers:{Authorization:"Bearer "+this.props.token},params:{showThera:!0,unfinishedOnly:!1,finishedOnly:!1,startingDate:S()().format("YYYY-MM-DD"),endDate:S()().add(1,"M").format("YYYY-MM-DD")}}).then((function(t){var a=t.data;e.setState({render:a.map((function(e){return o.a.createElement(T,{key:e.id,completed:e.completed,creator:e.creator.displayName,dueDate:e.dueDate,group:e.group.name,subject:e.subject.name,tags:e.tags,title:e.title},e.description)}))})}))}},{key:"render",value:function(){return o.a.createElement("section",{className:"taskList"},this.state.render)}}]),t}(n.Component),L=Object(i.b)((function(e){return{token:e.auth.token}}))(I),M=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(C,{isMobile:!1}),o.a.createElement(L,{isMobile:!1}))},H=a(43),Y=a.n(H),R=a(44),A=a.n(R),B=function(e,t,a){return{type:"SAVE_TOKEN",payload:{token:e,refresh:t,expires_in:a}}},F=a(21),U=a.n(F),J=function(e){function t(){return Object(f.a)(this,t),Object(z.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=(this.props.location.state||{from:{pathname:"/home"}}).from,a=function(a){e.props.saveToken(a.token,a.refresh,a.expires_in),e.props.history.replace(t)},n=function(t,a,n){23===t.errorCode&&e.props.history.replace({pathname:e.props.location.pathname+"/consent",search:"?type="+a+"&token="+n})},r=function(e){var t=e.tokenId;y({url:"/auth",method:"post",params:{grant_type:"google_openid",openid_token:t,client_id:"H_MINDENHOL"}}).then((function(e){a(e.data)})).catch((function(e){n(e.response.data,"google",t)}))};return o.a.createElement("div",{className:"w-screen h-screen flex items-center justify-center"},o.a.createElement("div",{className:"max-w-md md:max-w-lg p-3 lg:max-w-4xl"},o.a.createElement("img",{src:U.a,alt:"H\xe1zizz logo",className:"w-5/6 md:w-3/5 m-auto"}),o.a.createElement("h1",{className:"text-center text-3xl font-bold text-hazizz_blue-200 md:text-5xl lg:text-6xl"},"Jelentkezz be!"),o.a.createElement("p",{className:"text-xs text-center text-gray-600 tracking-tight md:text-sm md:tracking-normal lg:text-xl"},"(Amennyiben nincs felhaszn\xe1l\xf3d a rendszer k\xe9sz\xedt neked egyet.)"),o.a.createElement("p",{className:"text-center text-hazizz_blue-200 text-xl font-semibold md:text-3xl lg:text-4xl"},"Haszn\xe1ld a k\xf6z\xf6ss\xe9gi bejelentkez\xe9sek egyik\xe9t:"),o.a.createElement("div",null,o.a.createElement("div",{className:"flex flex-col lg:flex-row"},o.a.createElement(A.a,{appId:"737993926628989",fields:"email",callback:function(e){var t=e.accessToken;y({url:"/auth",method:"post",params:{grant_type:"facebook_token",facebook_token:t,client_id:"H_MINDENHOL"}}).then((function(e){a(e.data)})).catch((function(e){n(e.response.data,"facebook",t)}))},size:"small",render:function(e){return o.a.createElement("button",{type:"button",className:"btn btn-login btn-facebook small",onClick:e.onClick},"Login with Facebook")}}),o.a.createElement(Y.a,{clientId:"425675787763-751dukg0oookea8tltaeboudlg0g555q.apps.googleusercontent.com",onSuccess:r,onFailure:r,scope:"openid",className:"btn btn-login btn-google md:text-xl justify-center"})))))}}]),t}(n.Component),W=Object(i.b)(null,{saveToken:B})(J),K=a(17),V=a(45),q=a.n(V),$=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(z.a)(this,Object(x.a)(t).call(this,e))).handleCheckChange=function(e){a.setState({consent:e.target.checked})},a.handleRegister=function(){var e,t="",n="",o="",r="";switch(a.state.authType){case"google":t="googleregister",n="openIdToken",o="google_openid",r="openid_token";break;case"facebook":t="facebookregister",n="facebookToken",o="facebook_token",r="facebook_token"}y({url:"/account/"+t,method:"post",data:(e={},Object(K.a)(e,n,a.state.token),Object(K.a)(e,"consent",a.state.consent),e)}).then((function(e){var t;201===e.status&&y({url:"/auth",method:"post",params:(t={grant_type:o},Object(K.a)(t,r,a.state.token),Object(K.a)(t,"client_id","H_MINDENHOL"),t)}).then((function(e){a.handleTokenSave(e.data)}))}))},a.handleTokenSave=function(e){var t=(a.props.location.state||{from:{pathname:"/home"}}).from;a.props.saveToken(e.token,e.refresh,e.expires_in),a.props.history.replace(t)},a.state={authType:"",token:"",consent:!1},a}return Object(E.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=q.a.parse(this.props.location.search.substr(1));this.setState((function(){return{authType:e.type,token:e.token}}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"w-screen h-screen flex items-center justify-center"},o.a.createElement("div",{className:"max-w-md md:max-w-lg p-3 lg:max-w-4xl"},o.a.createElement("img",{src:U.a,alt:"H\xe1zizz logo",className:"w-5/6 md:w-3/5 m-auto"}),o.a.createElement("h1",{className:"text-center text-3xl font-bold text-hazizz_blue-200 md:text-5xl lg:text-6xl"},"Regiszt\xe1ci\xf3!"),o.a.createElement("div",{className:"flex flex-col items-center justify-center"},o.a.createElement("label",{className:"consentLabel",htmlFor:"consent"},o.a.createElement("input",{className:"absolute opacity-0 cursor-pointer h-0 w-0",onChange:this.handleCheckChange,checked:this.state.consent,type:"checkbox",name:"consent",id:"consent"}),o.a.createElement("span",{className:"consentCheckMark hover:bg-hazizz_blue-500 focus:shadow-outline"}),"A regisztr\xe1ci\xf3val elfogadom a H\xe1zizz:",o.a.createElement("ul",{className:"ml-3"},o.a.createElement("li",null,o.a.createElement("a",{className:"consentLink",rel:"noopener noreferrer",target:"_blank",href:"https://raw.githubusercontent.com/hazizz/hazizz.github.io/master/privacy-hu.txt"},"adatv\xe9delmi nyilatkozat\xe1t"),","),o.a.createElement("li",null,o.a.createElement("a",{className:"consentLink",rel:"noopener noreferrer",target:"_blank",href:"https://raw.githubusercontent.com/hazizz/hazizz.github.io/master/tos-hu.txt"},"\xe1ltal\xe1nos szerz\u0151d\xe9si felt\xe9teleti"),","),o.a.createElement("li",null,o.a.createElement("a",{className:"consentLink",rel:"noopener noreferrer",target:"_blank",href:"https://raw.githubusercontent.com/hazizz/hazizz.github.io/master/guideline-hu.txt"},"h\xe1zirendj\xe9t"),"!"))),o.a.createElement("button",{onClick:this.handleRegister,className:"btn btn-green"},"Tov\xe1bb \xbb"))))}}]),t}(n.Component),G=Object(i.b)(null,{saveToken:B})($);a(76),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=o.a.createElement(i.a,{store:g},o.a.createElement(l.a,null,o.a.createElement(s.a,{to:"/home"}),o.a.createElement(s.d,null,o.a.createElement(m,{path:"/home",Component:M}),o.a.createElement(s.b,{exact:!0,path:"/authenticate",component:W}),o.a.createElement(s.b,{path:"/authenticate/consent",component:G}))));c.a.render(P,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[46,1,2]]]);
//# sourceMappingURL=main.d995b4e5.chunk.js.map